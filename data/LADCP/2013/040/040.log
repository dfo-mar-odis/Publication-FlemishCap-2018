LDEO LADCP software: Version IX_10
#################### step 1: LOAD LADCP DATA #########################
LOADING CHECKPOINT checkpoints/040_0
RE-LOADING PER-CAST PARAMETERS
[Warning: Directory already exists.] 
[> In <a href="matlab: opentoline('U:\LADCP\HUD2013021_Flem_softwareUPDATE\proc\set_cast_params.m',38,1)">set_cast_params at 38</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\begin_processing_step.m',23,1)">begin_processing_step at 23</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\process_cast.m',162,1)">process_cast at 162</a>] 
LOADRDI:
 loading down-data raw/040AD000.000
 read 2841 ensembles with 20 bins each
 loading up-data raw/040AU000.000
 read 314 ensemble and 20 bins 
 WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING 
 warning instruments have no fixed ping rate 
  down dt for common ping number:0.13475  up dt :0.13828 hours 
 find best time match of up-looking ADCP to down looking ADCP
 up instrument is different by 0 ensembles
 WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING 
 not enough data to determine lag
 try to shift timeseries by lag: 0 correlation: 1
 shift ADCP timeseries by 0 ensembles
 number of joint ensembles is : 2841
 use target strength of up looking to find surface 
 found 174 finite RDI bottom velocities
 removed 42 values because of error velocity > 0.5 m/s
 removed 47 bottom-track values because of error velocity > 0.5 m/s
 using whole profile since no start time was given
 removed 9 profiles due to tilt derivative > 4 degrees
 multiply weight of bin 1 by 0
 Outlier discarded 2341 bins down looking
 Outlier discarded 4 bottom track
 Outlier discarded 0 bins up looking
 found local lookup table for serial # to instid 
 FINDLOG: search near file: raw/040AD000.000
 READSERIAL_WH: parse file raw/040AD000.LOG
 serial number is : 16389
 down looking serial number is : 16389
 FINDLOG: search near file: raw/040AU000.000
 READSERIAL_WH: parse file raw/040AU000.LOG
 serial number is : 13984
   up looking serial number is : 13984
==> STEP 1 TOOK 45.0 seconds
#################### step 2: FIX LADCP-DATA PROBLEMS #################
==> STEP 2 TOOK 0.0 seconds
#################### step 3: LOAD GPS DATA ###########################
LOADNAV: load NAV time series CTD/021a040.cnv
 number of NAV scans: 3296  delta t : 0.99999 seconds
executing magdec -46.7306 48.4942 2013 7 4
 corrected for magnetic declination of -18.1 deg
==> STEP 3 TOOK 1.0 seconds
#################### step 4: GET BOTTOM-TRACK DATA ###################
GETBTRACK creates own bottom track in addition to RDI
  in: p.btrk_mode 3 and p.btrk_used 1
 using increased bottom echo amplitudes to create bottom track
 localmax2: found 1685 valid values
 use 0.5 bins below maximum target strength for own bottom track velocity
 created 945 bottom distances keeping original
 removed 45 bottom track profiles W_btrk - W_ref difference > 0.05
 boutlier removed 20 bottom track velocities 
 created 469 bottom track velocities keeping original
 out: p.btrk_mode 3 and p.btrk_used 1
==> STEP 4 TOOK 0.6 seconds
#################### step 5: LOAD CTD PROFILE ########################
==> STEP 5 TOOK 0.0 seconds
#################### step 6: LOAD CTD TIME SERIES ####################
LOADCTD: load CTD time series CTD/021a040.cnv
 read 3296 CTD scans; median delta_t = 1.00 seconds
 interpolated to 3295 CTD scans; delta_t = 1.00 seconds
 90% LADCP depth  1462 at 04-Jul-2013 00:06:55
 90% CTD pressure 1475 at 03-Jul-2013 23:58:05
 adjusting GPS time to CTD time (+529 seconds)
 Changed Start Time : 03-Jul-2013 23:27:26  to 03-Jul-2013 23:43:58
 Changed End   Time : 04-Jul-2013 00:40:48  to 04-Jul-2013 00:35:33
 median CTD time difference 0.99999 s
 removed 0 pressure spikes
 use 1 time base for W_ctd
 CTD max depth : 1618
 bestlag removed 19 spikes
 lag: 3  correlation: 0.87864
 bestlag removed 24 spikes
 lag: 2  correlation: 0.91495
 bestlag removed 30 spikes
 lag: 3  correlation: 0.92343
 bestlag removed 19 spikes
 lag: 2  correlation: 0.96394
 bestlag removed 20 spikes
 lag: 2  correlation: 0.92088
 bestlag removed 29 spikes
 lag: 2  correlation: 0.94344
 bestlag removed 24 spikes
 lag: 2  correlation: 0.91001
 acceleration lag: 2  correlation: 0.6814
 bestlag removed 204 spikes
 all data lag: 2  correlation: 0.99282
 median lag 2
 most popular lag 2
 best correlated lag 2
 BESTTLAG:  lag is: 2  for which 117% of 6 lags agree
 best lag W: 2 CTD scans ~ -2 seconds  corr:0.99282
 adjust ADCP time to CTD time and shift depth record 
 made CTD profile from time series data. 
 update start pos  from:NaN°N     NaN'  NaN°E     NaN'
			to:48°N 29.6304'   46°W 43.7868'
 update end pos    from:NaN°N     NaN'  NaN°E     NaN'
			to:48°N 29.7060'   46°W 43.8408'
==> STEP 6 TOOK 2.0 seconds
#################### step 7: FIND SURFACE & SEA BED ##################
GETDPTHI: Depth from vertical velocity inverse method
 starting run 1 to get LADCP depth
 take soundspeed from CTD profile 
 correct velocities for sound speed 
 use CTD time series depth, will not do depth inversion 
 LADCP minus CTD depth mean: -0.43566  std: 4.7734
 maximum depth from int W is :1618
 should be                   :1618
  bottom found at 1693 +/- 3 m
 correct bin length for sound speed
 removing 381 values below bottom
==> STEP 7 TOOK 1.2 seconds
#################### step 8: APPLY PITCH/ROLL CORRECTIONS ############
==> STEP 8 TOOK 0.0 seconds
#################### step 9: EDIT DATA ###############################
 bin masking               : set 1442 weights to NaN
 side-lobe contamination   : set 717 weights to NaN
 spike filter              : set 8 weights to NaN
==> STEP 9 TOOK 0.4 seconds
#################### step 10: FORM SUPER ENSEMBLES ###################
PREPINV: prepare data for inversion, form Super-Ensembles
 average profiles over (p.avdz) 9.8488 meter
 reduce weight for larger tilts 0.5 at 10 degree
 mean compass offset based on velocity is -162.1566 deg
 mean compass offset based on tilt is -0.0005 deg
 rot up2down use mean up/down compass
 will not correct for sound speed twice
 remove reference velocity and average ensembles 
 Outlier discarded 240 bins down looking
 Outlier discarded 0 bins up looking
 found 2 bottom track std==0 set to 0.1 m/s
 found 4 finite bottom track ensembles
 discarded 0 bottom tracks velocities because of wstd  > 0.13444
 set 22 weight values to nan  because super ensemble std =0 
 set 16 values to minimum super ensemble std 0.041331
 reduced ensemble size is 256
==> STEP 10 TOOK 4.1 seconds
#################### step 11: REMOVE SUPER-ENSEMBLE OUTLIERS #########
==> STEP 11 TOOK 1.0 seconds
#################### step 12: RE-FORM SUPER ENSEMBLES ################
 mean compass offset based on tilt is -0.0005 deg
 remove first guess ocean velocity from raw data
 adjusted for velocity offset in up and down looking ADCP
 remove first guess ocean velocity from raw data
 rot up2down use mean up/down compass
 rotated earlier, use difference 
 will not correct for sound speed twice
 remove reference velocity and average ensembles 
 Outlier discarded 240 bins down looking
 Outlier discarded 0 bins up looking
 found 2 bottom track std==0 set to 0.1 m/s
 found 4 finite bottom track ensembles
 discarded 0 bottom tracks velocities because of wstd  > 0.13444
 set 22 weight values to nan  because super ensemble std =0 
 set 16 values to minimum super ensemble std 0.041331
 reduced ensemble size is 256
==> STEP 12 TOOK 4.5 seconds
#################### step 13: (RE-)LOAD SADCP DATA ###################
LOADSADCP: load SADCP data file SADCP/SADCP_hud2013021.mat
 found 4 SADCP profiles 
==> STEP 13 TOOK 0.2 seconds
#################### step 14: CALCULATE INVERSE SOLUTION #############
GETINV:  compute best velocity profile
 Barotropic velocity error 0.019386 [m/s]
 super ensemble velocity error 0.018441 [m/s]
 set velocity error to:0.042758 [m/s]
 vertical resolution (ps.dz) is 9.8473 [m]
 use super ensemble std based weights normalized by 0.042758 m/s 
 preaveraged GPS ships vel 1 times 
 remove 518 constaints below minimum weight 
 smooth Ocean velocity profile
 found 6 ill constrained elements will smooth 
 smooth CTD velocity profile
 no smoothness constraint applied 
 bottom inversion 
 4 bottom track ctd-vel weights of about : 0.48696
 weight for bottom track is (ps.botfac) 1
 mean sadcp weight : 1.0439
 weight for SADCP vel is (ps.sadcpfac) 1
 lainbaro: 7% of profile have no useful data 
 normalized barotropic constrain weight: 1.2851
 mean individual ctd velocity weight : 48.9707
 ready for inversion  length of  d:   3501
           (CTD vel)  length of A1:    256
         (ocean vel)  length of A2:    171
Moore-Penrose inverse
 solve only down trace
 smooth Ocean velocity profile
 found 4 ill constrained elements will smooth 
 smooth CTD velocity profile
 no smoothness constraint applied 
Moore-Penrose inverse w/o errors
 solve only up trace
 smooth Ocean velocity profile
 found 5 ill constrained elements will smooth 
 smooth CTD velocity profile
 no smoothness constraint applied 
Moore-Penrose inverse w/o errors
[Warning: Matrix is close to singular or badly scaled. Results may be inaccurate. RCOND =  1.319276e-18.] 
[> In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\getinv.m',1258,1)">getinv>lesqfit at 1258</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\getinv.m',1202,1)">getinv>lainsolv at 1202</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\getinv.m',760,1)">getinv at 760</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\process_cast.m',430,1)">process_cast at 430</a>] 
 found 171 big >5 m/s up cast UOCEAN:
CHECKINV all values are given in [m/s] 
 Velocity profile error:  0.043  should be about noise:  0.029
 Check bottom track rms:  0.312  should be smaller than  0.164 /  1.000
 Check SADCP        rms:  0.019  should be smaller than  0.043 /  1.000
 GPS-LADCP ship spd diff: 0.006  should be smaller than  0.019 /  1.000
 use reference layer W
CHECKBTRK: check bottom track against U_ctd solution 
 profiles within give acceptable range: 377
  U bias : 0.091 [m/s]  std: 0.262 [m/s]
  V bias :-0.049 [m/s]  std: 0.235 [m/s]
  W bias : 0.007 [m/s]  std: 0.063 [m/s]
[Warning: Polynomial is not unique; degree >= number of data points.] 
[> In <a href="matlab: opentoline('C:\Program Files\MATLAB\R2014a\toolbox\matlab\polyfun\polyfit.m',70,1)">polyfit at 70</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\checkbtrk.m',173,1)">checkbtrk at 173</a>
  In <a href="matlab: opentoline('U:\Ladcp\HUD2013021_Flem_softwareUPDATE\process_cast.m',436,1)">process_cast at 436</a>] 
  W slope fact :0.0000 [1/m] lower W below bottom 
  W diff :0.3292 [m/s] ping to ping w difference 
  H std :   9.7 [m]  large means bottom is rough/sloped
  Tilt mean :2.0 +/- 0.8 [^o]  
==> STEP 14 TOOK 5.0 seconds
#################### step 15: CALCULATE SHEAR SOLUTION ###############
GETSHEAR2: average shear profile over (ps.dz) 9.8473 [m]
 maximum std (stdf) 2 of data 
 minimum weight  0.1 of data 
 will use 100 % of data 
 increased error because of shear - inverse difference
==> STEP 15 TOOK 0.2 seconds
#################### step 16: CALCULATE DIFFUSIVITY PROFILE ##########
==> STEP 16 TOOK 0.0 seconds
#################### step 17: PLOT RESULTS & SHOW WARNINGS ###########
 do not know calibration of this instrument make a guess: 
 Battery Voltage is 50 V
LADCP WARNINGS                               
 warning instruments have no fixed ping rate 
 Large compass deviation: 167.6766           
 
 LADCP processing warnings: 
==> STEP 17 TOOK 0.5 seconds
#################### step 18: SAVE OUTPUT ############################
 save results 
